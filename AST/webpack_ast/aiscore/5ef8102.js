(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{1396:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));n(19),n(1417);var r=n(2358),l=n(2359),o=n(9),c=n(656),f=["#FF203C","#FF6600","#FFAE0F","#C1CC01","#5CB400","#0E8604"],y=function(){function e(t){var n=t.$i18n,l=t.dom,o=t.lineup,c=t.players,f=t.teamObj,y=t.prefix_url;Object(r.a)(this,e);var h=this,d=!1;try{d=$.browser.isMac}catch(e){}h.$i18n=n,h.cache={},h.array=[],h.lineup=o,h.players=c,h.teamObj=f,h.prefix_url=y,h.canvas=l,h.ctx=h.canvas.getContext("2d"),d?(h.canvas.style="width:".concat(320,"px;height:").concat(507,"px"),h.canvas.width=640,h.canvas.height=1014,h.ctx.scale(2,2)):(h.canvas.width=320,h.canvas.height=507),h.reloadCanvas(),h.canvas.addEventListener("click",h.handleClick.bind(h))}return Object(l.a)(e,[{key:"getMousePos",value:function(canvas,e){var rect=canvas.getBoundingClientRect();return{x:e.clientX-rect.left*(canvas.width/rect.width),y:e.clientY-rect.top*(canvas.height/rect.height)}}},{key:"handleClick",value:function(e){for(var t,n=this.getMousePos(this.canvas,e),r=n.x,l=n.y,o=this.players,i=0,c=this.array.length;i<c;i++)if(r>(t=this.array[i]).x1&&r<t.x2&&l>t.y1&&l<t.y2){var f=this.$i18n.path("player-".concat(o[t.player.player.player.id].slug,"/").concat(t.player.player.player.id));window.open(f,"_blank");break}}},{key:"initData",value:function(e){this.lineup=e}},{key:"setBg",value:function(){var e=this,t=e.ctx,n=e.cache,r=(e.lineup,new Image);r.src=c,r.onload=function(){n[c]=r,t.drawImage(r,0,0,320,507),e.loadImage()}}},{key:"loadImage",value:function(){var e=this,t=(e.ctx,e.cache,e.lineup),n=e.players;e.prefix_url;t.forEach((function(t){if(t.x=t.locationX,t.y=t.locationY,t.x&&t.y){var r=new Image,l=Object(o.getLogo)(n[t.player.id].logo,"player","!w50");r.src=l,r.onload=function(){e.drawPlayer({img:r,player:t,position:"home"})}}}))}},{key:"drawPlayer",value:function(e){var t=this,n=t.ctx,r=t.transformXY(e.player.x,e.player.y),l=40/e.img.width*e.img.height;n.beginPath(),n.save(),n.arc(r.x+20,r.y+20,20,0,2*Math.PI),n.fillStyle="#fff",n.fill(),n.clip(),n.drawImage(e.img,r.x,r.y+(40-l),40,l),n.restore(),n.closePath(),t.drawName(e,r),t.drawRate(e,r),t.drawTeamLogo(e,r),t.array.push({player:e,x1:r.x,y1:r.y-10,x2:r.x+50,y2:r.y+50})}},{key:"drawTeamLogo",value:function(e,t){var n=this.ctx,r=this.teamObj,l=(this.prefix_url,new Image),c=Object(o.getLogo)(r[e.player.team.id].logo,"team","!w50");l.src=c,l.onload=function(){n.drawImage(this,t.x-10,t.y+20,16,16)}}},{key:"drawName",value:function(e,t){var n=this.ctx,r=(this.players[e.player.player.id].name||"").trim();r&&(n.textAlign="center",n.font="normal 11px Rubik",n.fillStyle="#fff",r.length>6&&(r="".concat(r.substring(0,6),"...")),n.fillText(r,t.x+20,t.y+55))}},{key:"drawRate",value:function(e,t){if(0!=e.player.rating){var n=this.ctx;this.players;n.font="normal 10px Rubik",this.fillRoundRect(n,t.x+30,t.y+20,19,19,3,this.formatRateColor(e.player.rating)),n.fillStyle="#fff",n.fillText(parseFloat(e.player.rating).toFixed(1),t.x+39,t.y+33)}}},{key:"drawNumber",value:function(e,t){var n=this.ctx;this.players;n.font="normal 10px Rubik",n.fillStyle="#fff",n.fillText("#"+e.player.shirtNumber,t.x-9,t.y+10)}},{key:"clearCanvas",value:function(){this.ctx.clearRect(0,0,320,507)}},{key:"reloadCanvas",value:function(){this.clearCanvas(),this.array=[],this.setBg()}},{key:"transformXY",value:function(e,t){return{y:507*(1-t/100),x:e/100*320-20}}},{key:"formatRateColor",value:function(e){return e<6?f[0]:e<=6.49&&e>=6?f[1]:e<=6.99&&e>=6.5?f[2]:e<=7.99&&e>=7?f[3]:e<=8.99&&e>=8?f[4]:e>=9?f[5]:void 0}},{key:"fillRoundRect",value:function(e,t,n,r,l,o,c){if(2*o>r||2*o>l)return!1;e.save(),e.translate(t,n),this.drawRoundRectPath(e,r,l,o),e.fillStyle=c||"#000",e.fill(),e.restore()}},{key:"drawRoundRectPath",value:function(e,t,n,r){e.beginPath(0),e.arc(t-r,n-r,r,0,Math.PI/2),e.lineTo(r,n),e.arc(r,n-r,r,Math.PI/2,Math.PI),e.lineTo(0,r),e.arc(r,r,r,Math.PI,3*Math.PI/2),e.lineTo(t-r,0),e.arc(t-r,r,r,3*Math.PI/2,2*Math.PI),e.lineTo(t,n-r),e.closePath()}}]),e}()},1417:function(e,t,n){var r=n(42);r(r.P,"Array",{fill:n(284)}),n(192)("fill")},2358:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},2359:function(e,t,n){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return l}))}}]);